{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Relatório de Agendamentos</title>
  <link rel="stylesheet" href="{% static 'geral/css/geral_Style.css' %}">
</head>
<body>
  <h2>Relatório Geral</h2>

<p><strong>Total de Agendamentos:</strong> {{ total_agendamentos }}</p>
<p><strong>Total Arrecadado:</strong> R$ {{ total_arrecadado }}</p>

<p><strong>Cliente com mais agendamentos:</strong> 
  {% if cliente_top %}
  {{ cliente_top.cliente__nome }}
  ({{ cliente_top.total }})
  {% else %} - {% endif %}
</p>

<p><strong>Funcionário que mais concluiu:</strong> 
  {% if funcionario_top %} 
  {{ funcionario_top.profissional__nome }}
  ({{ funcionario_top.total }})
  {% else %} - {% endif %}
</p>

<hr>

<table>
  <thead>
    <tr>
      <th>Cliente</th>
      <th>Serviço</th>
      <th>Profissional</th>
      <th>Data</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for ag in agendamentos %}
    <tr>
      <td>{{ ag.cliente.nome }}</td>
      <td>{{ ag.servico.nome }}</td>
      <td>{{ ag.profissional.nome }}</td>
      <td>{{ ag.data_agendada|date:"d/m/Y H:i" }}</td>
      <td>{{ ag.status }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">Nenhum agendamento encontrado.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

</body>
</html>
