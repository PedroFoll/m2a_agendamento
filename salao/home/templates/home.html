{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
    <head>
      <meta charset="UTF-8">
      <title>Painel</title> 
      <link rel="stylesheet" href="{% static 'home_static/css/home.css' %}">
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
  <body>
        {% include 'core/navbar.html' %}
        {% include 'core/sidebar.html'%}
    <div class="header">
      <h1>Painel de Performance</h1>
      <p>VisÃ£o geral dos agendamentos, clientes, FuncionÃ¡rios e performance</p>
    </div>

    <div class="cards">
      <div class="card">
        <span class="icon" >ğŸ“…</span>
        <h2>{{qntd_agendamentos}}</h2>
        <p>Total de Agendamentos</p>
      </div>
      

      <div class="card">
        <span class="icon">â³</span>
        <h2>{{agend_pendentes}}</h2>
        <p>Agendamentos Pendentes</p>
      </div>
      
      <a href="/relatorios/agendamentos/?selecionar_status=ConcluÃ­do">
        <div class="card">
          <span class="icon">âœ”ï¸</span>
          <h2>{{agend_concluidos}}</h2>
          <p>Agendamentos ConcluÃ­dos</p>
        </div>
      </a>
      
      <a href="/relatorios/agendamentos/?selecionar_status=Cancelado">
      <div class="card">
        <span class="icon">âŒ</span>
        <h2>{{agend_cancelados}}</h2>
        <p>Agendamentos Cancelados</p>
      </div>
      </a>
      
      <a href="/relatorios/agendamentos/?data_inicio={{data_range.hoje}}&data_fim={{data_range.amanha}}">
        <div class="card">
          <span class="icon">ğŸ“…</span>
          <h2>{{ data_range.agendamentos_hoje }}</h2>
          <p>Agendamentos Hoje</p>
        </div>
      </a>
      
      <a href="/relatorios/agendamentos/?data_inicio={{data_range.inicio_da_semana}}&data_fim={{data_range.fim_da_semana}}">
        <div class="card">
          <span class="icon">ğŸ“…</span>
          <h2>{{ data_range.agendamentos_semana }}</h2>
          <p>Semana Atual</p>
        </div>
      </a>

      <a href="/relatorios/clientes/">
      <div class="card">
        <span class="icon">ğŸ‘¥</span>
        <h2>{{qntd_clientes }}</h2>
        <p>Clientes Cadastrados</p>
      </div>
      </a>
      
      <div class="card">
        <span class="icon">ğŸ’²</span>
        <h2>R$ {{ valor_total_serv|floatformat:2 }}</h2>
        <p>Faturamento Total</p>
    </div>
                
    </div>
    
    <div class="grid">
      <div class="charts">
        <div class="chart-box">
          <h3>DistribuiÃ§Ã£o de ServiÃ§os</h3>
        <canvas id="servicosChart"></canvas>
        {% for servico in total_agendamentos_serv %}
        <li class="qtd-agen"
        data-percent="{{servico.percentual}}"
        data-servico-nome="{{servico.servico__nome}}">
              {{ servico.servico__nome }}: 
              {{ servico.total }} 
              pedidos ({{servico.percentual}}%)
            </li>
          {% endfor %}
      </div>
    </div>

<div class="ranking-section">
    <div class="card-rank">
      <h3>ğŸ† Top 5 Clientes</h3>
      <div class="ranking">
        {% for i in rank_cli %}
          <div class="ranking-item">
            {{ forloop.counter }}. {{ i.cliente__nome }}
            <small>{{ i.total_servicos }} agendamentos</small>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="card-rank">
      <h3>â­ Top 5 FuncionÃ¡rios</h3>
      <div class="ranking">
        {% for i in rank_func %}
          <div class="ranking-item">
            {{ forloop.counter }}. {{ i.profissional__nome }}
            <small>{{ i.total_servicos }} agendamentos</small>
          </div>
        {% endfor %}
      </div>
    </div>
  </di>
</div>

 
</body>
<script src="{% static 'geral/js/geral.js' %}"></script>
</html>