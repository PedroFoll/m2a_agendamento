{% load static %}
<link rel="stylesheet" href="{% static 'home_static/css/home.css' %}">
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    
    {% include 'core/navbar.html' %}
    {% include 'core/sidebar.html' %}
    <div class="search-container">
        <label class="search-title">Pesquisar</label>
        <input class="search-text" type="text">
        <span class="nav-icon material-symbols-rounded">search</span>
    </div>

  <div class="dashboard">
    <div class="cards">
      <a href="cadastros/servicos/cadastrar_servico/">
        <div class="card servico">
          <h2>Serviços</h2>
          <p>{{ servicos}}</p>
        </div>
      </a>

      <a href="/relatorios/agendamentos/?data_inicio={{data_range.inicio_da_semana}}&data_fim={{data_range.amanha}}">
        <div class="card">
          <h2>Agendamentos Hoje</h2>
          <p>{{ data_range.agendamentos_hoje }}</p>
        </div>
      </a>

      <a href="/relatorios/agendamentos/?data_inicio={{data_range.inicio_da_semana}}&data_fim={{data_range.fim_da_semana}}">
        <div class="card">
          <h2>Semana Atual</h2>
          <p>{{ data_range.agendamentos_semana }}</p>
        </div>
      </a>


      <div class="card">
        <h2>Cancelados</h2>
        <p>5</p>
      </div>

      <div class="card">
        <h2>Receita</h2>
        <p>R$ 1.200</p>
      </div>

    </div>

    <div class="charts">
      <div class="chart-box">
        <h3>Distribuição de Serviços</h3>
        <canvas id="servicosChart"></canvas>
          {% for servico in total_agendamentos_serv %}
            <li class="qtd-agen"
              data-percent="{{servico.percentual}}"
              data-servico-nome="{{servico.servico__nome}}">
              {{ servico.servico__nome }}: {{ servico.total }} pedidos ({{servico.percentual}}%)
            </li>
          {% endfor %}
      </div>
    </div>

  <div class="grafic">
    <a href="">
      <label class="lb-title">Realtorio de datas</label>
        <span class="qtd-agen">Total de Agendamentos: {{ qntd_agendamentos }}</span>
        {% for item in agrp %}
          <li class="qtd-agen">
            <label >{{ item.dia_nome }}: </label>
            <span>{{ item.total_agendamentos }}</span>
          </li>
        {% endfor %}
    </a>
     
      <div class="pagination">
          {% if agrp.has_previous %}
              <a class="nandb" href="?pagina={{ agrp.previous_page_number }}">Anterior</a>
          {% else %}
              <a class="nandb">Anterior</a>
          {% endif %}

      <span>Página {{ agrp.number }} de {{ agrp.paginator.num_pages }}</span>      
          {% if agrp.has_next %}
              <a class="nandb" href="?pagina={{ agrp.next_page_number }}">Próxima</a>
          {% else %}
              <a class="nandb">Próxima</a>
          {% endif %}
      </div>
    </div>
  </div>
</body>
<script src="{% static 'home_static/js/home.js' %}"></script>
</html>